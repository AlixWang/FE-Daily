# websocket 发送二进制数据实践

## 为什么使用使用二进制传递数据

作为一名老前端，平时在工作中，接触到最多的网络数据传递（非图片/视频）基本都以文本格式传递。比如一个数据接口的返回值通常是JSON格式、HTML、JS、CSS资源文件的返回这些统统都是文本格式的数据。通过文本格式传输的数据简单、易于读取、不需要经过解码操作就能直接展示这都是他的优点。那为啥我们还需要使用二进制传递数据呢？原因也很简单比如说我们现在要从服务器发送一张图片资源到用户浏览器，如果不使用二进制传递数据，而使用文本格式那么首先我们需要在服务器上件图片文件编码为BASE64或者其他的文本格式数据，再将文本数据通过网络发送，浏览器收到数据后再从文本数据转换为对应的二进制图片进行下一步处理。在这个过程中存在以下几个方面的弊端：

+ 二进制数据在服务端进行编码后传输会增大数据体积，以base64为例，平均体积会增加33%，也就是说1kb的数据会增加到1.33kb;
+ 需要进行额外的编码和解码流程，增加了系统压力和复杂度；
+ 对服务端和客户端性能有负面影响

## 为什么要在websocket上进行二进制数据传输

类比以上使用二进制数据进行传输的好处，在ws上进行二进制数据传输获得的收益也是相同。而且基于ws协议使用场景，往往都是数据交换频率高，数据量大，使用二进制进行数据传输对带宽和性能所能带来的提升更加明显。

## 如何在ws中进行二进制数据传输



